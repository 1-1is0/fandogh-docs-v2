branches:
  only:
  - main
language: python
cache: yarn
python:
- '3.5'
before_install:
- nvm install 10.16.3
install:
- pip install fandogh-cli --upgrade
script:
- echo $TRAVIS_COMMIT
- COLLECT_ERROR=True fandogh login --username=$FANDOGH_USERNAME --password=$FANDOGH_PASSWORD
- fandogh namespace active --name default
- yarn
- yarn build
- fandogh source run
notifications:
  slack:
    rooms:
      - secure: "WPIwdtlSFOh4PezYYzftCnqgz9eNHbwlfl+XsCe0Me+LiVwTPkfirS3cAsBHfX6zrWvqsP6YtkLWWlD9NKxH9W63oRn19g/nTdYnbLP/YKh9y0Ajb5tJPLWqM8i4PYSUX3WqydtyqNhlmsc3nSHcNYdv82jq0vatqEPDlySZNAjkRtqacf0Fw2jZ1cXke46rRR6jWbY8wCN5H1zl845XSOlBhmjR8hzc44RfLz3OogR1GZwvdNuKQj+EvU8EpH9QHGrguuXYjxYTAmoPIhJgnGbgAXeuB7BEeTqlCp7Z8N9YJDBwpJsPDzZIqWZ61mPn4oAHxzCHxBFnt0ynzIjOanf37F/iRVLtOXUB/RpRLZtnz4AsVJvoH8mT3OIgStf5k4Uqcg6+MPx2QTnl2kv7a27yl9oJTZhrIf2ljmE+Z9ruWIWmdZbZLILenzJrgw6HeUkQrw13DG77CGdogXu8YNO0etS3QPbA6Tqmfu4tmOggf7uN/ml28VfHdDwFzdyWRcWFR2BzB62I24vHXQtxIHxythE41GnhZD5QD3xHQW7TP07uHQKkbCp+4Zi2NTxUgcFSeP/DrYzeQ69yFwMjMTYHDc6oIK9XWWCFkH/LAHZgRX+1k5KUT/t6cGiV5CvTUQN8FbVv/mU1Prk5/Ibz7jkhKOfW369gy5bOIDzXltw="
    on_success: always
    on_failure: always
