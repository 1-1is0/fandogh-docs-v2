---
id: images
title: تصاویر در فندق
sidebar_label: تصاویر در فندق
description: 'سرویس ها در فندق از روی ایمیج ها ساخته می شوند و از طرفی سرویس ها همواره در حال بهبود و تغییر هستند. برای آنکه بتوانیم...'
keywords:
  - "سکوی ابری"
  - ایمیج
  - تصویر
  - داکر
  - image
  - docker image
  - "سکوی ابری فندق"
  - "زیرساخت ابری"
image: /img/docs/thumbnails/images/images-thumbnail.png
---
سرویس ها در فندق از روی ایمیج ها ساخته می شوند و از طرفی سرویس ها همواره در حال بهبود و تغییر هستند. برای آنکه بتوانیم تاریخچه تغییرات هر باره را در اختیار داشته باشیم، image ها دارای یک شماره نسخه منحصر به فرد خواهند بود که کاربر در هر بار publish کردن، آن را مشخص می کند.<br/>
به طور کلی در فندق هر Image معادل یک پروژه است و هر image  دارای یک نام و تعداد دلخواه ورژن است.

:::tip راهنمایی
مفهوم Image و ImageVersion تقریبا شبیه به مفهوم Image و Tag در داکر است، که بعدا می‌توانید از روی هر ورژن از یک Image، به تعداد مورد نیاز سرویس ایجاد کنید.
:::

## ساخت ایمیج‌ها
به طور مثال فرض کنید شما پروژه ای به نام hello_application را در پوشه ای در رایانه شخصی خود دارید و حالا قصد دارید که این پروژه را بر روی فندق بارگذاری و اجرا نمایید. ابتدا از طریق Command Line به آدرس پوشه مورد نظر میروید.

![Image Init](/img/docs/image-init.svg "Image Init")

وقتی مطمئن شدید در آدرس مورد نظر هستید، با استفاده از دستور ‍‍‍`init` پروژه خود را برای بارگذاری بر روی سرور فندق آماده می‌کنید.

```bash
fandogh image init --name hello_application
```
**name--** یا **n-**<br/>
پارامتر name یا n نمایانگر نام پروژه ای است که می‌خواهید بارگذاری کنید.
<br/>

:::note توجه
توجه داشته باشید که شما برای هر پروژه تنها یک بار نیاز دارید که از دستور **init** استفاده کنید و برای بارگذاری تنها نیاز است که هر بار یک شماره  نسخه جدید را **publish** کنید.
:::

هنگامی که شما در fandogh-cli دستور init را فراخوانی می‌کنید، سمت سرور فندق یک پروژه جدید با نامی که مشخص کرده‌اید `)در این مثال نام پروژه ما hello_application است(` می‌سازد. این پروژه در ابتدا حاوی هیچ ورژنی نبوده و فقط یک نام است که در ادامه از طریق ورژن‌هایی که برای آن می‌سازید، می‌توانید سرویس خود را اجرا کنید. 

![Image Publish](/img/docs/image-publish.svg "Image Publish")

حال برای آنکه محتویات پوشه ای که داخل آن هستیم برای سرورهای فندق ارسال شود از دستور `image publish` استفاده می کنیم.

```bash
fandogh image publish --version 1.0
```
**version--** یا **v-**<br/>
پارامتر version یا v نمایانگر ورژن پروژه ای است که می‌خواهید بارگذاری کنید.
<br/>

:::caution نکته
توجه داشته باشید برای آنکه پروژه شما به درستی publish شود، حتما باید در قسمت root directory پروژه خود Dockerfile مربوط به آن پروژه را داشته باشید؛ در غیر این صورت در ادامه با مشکل مواجه خواهید شد.
:::

زمانی که دستور publish را اجرا می‌کنید، fandogh-cli محتویات پوشه جاری را با فرمت zip فشرده کرده و به عنوان یک ورژن بخصوص که خودتان همانند دستور بالا آن را تعیین کرده اید، بر روی سرور فندق بارگذاری می‌کند. فایل فشرده شده سمت سرور فندق گشوده می‌شود و با استفاده از Dockerfile همراه فایل‌ها یک ایمیج داکر تولید شده و با ورژن مشخص شده تگ )شناسه گذاری( می‌شود و در کتابخانه فندق ذخیره می‌شود. <br/><br/>
:::tip fandogh-cli
در نظر داشته باشید برای اینکه فایل ها و فولدرهایی که نیاز ندارید در ایمیج شما لحاظ نشوند یک فایل fandoghignroe. بسازید و همانند gitignore مسیر ها را مشخص کنید تا
از ارسال فایل های غیر ضرروی جلوگیری کنید.
:::
:::note مثال
فرض کنید در پوشه جاری می خواهیم مانع از ارسال پوشه venv و vendor شویم. برای اینکار کافیست فایل fandoghignore. را بسازیم و سپس اسم فولدر ها درون آن قرار دهیم تا این فولدر ها در ایمیج ما لحاظ نشود.
:::
```bash title=".fandoghignore file example"
vendor 
venv 
./idea
```
هنگام ساخته شدن Docker image از روی محتویات فایل فشرده، لاگ هایی مربوط به ساخت ایمیج تولید می‌شود. این لاگ ها بلافاصله بعد از publish موفق روی ترمینال شما قابل مشاهده خواهد بود؛ `مگر آنکه از طریق d- یا detach به fandogh-cli گفته باشید که نیازی به مشاهده لاگ ندارید`.
برای آنکه به fandogh-cli بگویید که لاگ های ساخت ایمیج را به شما نمایش ندهد، می‌توانید مانند نمونه زیر از پارامتر detach استفاده کنید.


```bash
fandogh image publish --version 1.0 -d
```
**detach** یا **d-**<br/>
این پارامتر به fandogh-cli میگوید که همه کارها را در background انجام دهد تا کاربر بتواند از cli استفاده کرده و منتظر پایان کار سرور نماند.
<br/>

:::tip fandogh-cli
هر زمان که نیاز داشته باشید می‌توانید از طریق `fandogh image logs` لاگ‌های مربوط به ساخت یک ورژن بخصوص را مشاهده کنید.
:::

```bash
fandogh image logs --image IMAGE_NAME --version IMAGE_VERSION
```

**image--** یا **i-**<br/>
پارامتر image یا i نمایانگر نام imageای است که می‌خواهید لاگ های آن را مشاهده کنید.

**version--** یا **v-**<br/>
پارامتر version یا v نمایانگر ورژن imageای است که می‌خواهید لاگ های آن را مشاهده کنید.


## مدیریت تصاویر

![ CLI Image](/img/docs/cli_image.svg "CLI Image")

دستورات مربوط به بخش image فقط محدود به init یا publish و logs نیست. کلیه دستورات مربوط به بخش image در ادامه توضیح داده شده‌اند.

:::tip fandogh-cli
شما همچنین می توانید با وارد کردن دستور`fandogh image --help` در fandogh-cli لیست دستورات موجود را مشاهده کنید.
:::

### init
با وارد کردن دستور `fandogh image init --name IMAGE_NAME` شما سمت سرور پروژه ای با نام IMAGE_NAME بر روی فندق می‌سازید تا بتوانید محتوای پروژه خود را با دستور publish بر روی آن منتقل کنید.

**name--** یا **n-**<br/>
پارامتر name یا n نمایانگر نام پروژه‌ای است که می‌خواهید بارگذاری کنید.

### publish
با وارد کردن دستور `fandogh image publish --version IMAGE_VERSION` می‌توانید پروژه خود را به سرور فندق ارسال کنید.

**version--** یا **v-**<br/>
پارامتر version یا v نمایانگر ورژن پروژه‌ای است که می‌خواهید بارگذاری کنید.

**detach** یا **d-**<br/>
این پارامتر به fandogh-cli میگوید که همه کارها را در background انجام دهد تا کاربر بتواند از cli استفاده کرده و منتظر پایان کار سرور نماند.

### logs
با استفاده از دستور `fandogh image logs --image IMAGE_NAME --version IMAGE_VERSION` می‌توانید لاگ های مربوط به ساخت هر ورژن از یک image مشخص را مشاهده کنید.

**image--** یا **i-**<br/>
پارامتر image یا i نمایانگر نام imageای است که می‌خواهید لاگ های آن را مشاهده کنید.

**version--** یا **v-** <br/>
پارامتر version یا v نمایانگر ورژن imageای است که می‌خواهید لاگ های آن را مشاهده کنید.

**with_timestamp--** <br/>
با استفاده از این پارامتر می‌توانید مدت زمان اجرای هر قدم از ساخت لایه‌های ایمیج را مشاهده کنید.<br/>
به این ترتیب متوجه می‌شوید در کل فرآیند ساخت ایمیج، کدام یک از لایه‌ها و دستورات زمان زیادی را صرف کرده‌اند تا آن‌ بخش‌ها را بهبود ببخشید.

### list
با استفاده از دستور `fandogh image list` می‌توانید لیست تمام imageهایی که تا به حال ساخته‌اید را مشاهده کنید.

### delete
با استفاده از دستور `fandogh image delete --image IMAGE_NAME` می‌توانید image با نام IMAGE_NAME را از رجیستری فندق پاک کنید.

:::danger هشدار
توجه داشته باشید که حذف image منجر به حذف تمام ورژن‌ها و لاگ‌های build آن image خواهد شد.
:::

### versions
با وارد کردن دستور `fandogh image versions --image IMAGE_NAME` می‌توانید لیست ورژن‌های مربوط به هر image را مشاهده کنید.

**image--** یا **i-** <br/>
این پارامتر نمایانگر نام imageای است که می‌خواهید لیست ورژن های آن را مشاهده کنید.
